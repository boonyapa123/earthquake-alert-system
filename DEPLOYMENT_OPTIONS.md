# üöÄ ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£ Deploy Backend

## ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- Backend URL: `http://10.134.94.222:3000/api/v1`
- ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô WiFi ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô 4G/5G ‡πÑ‡∏î‡πâ

---

## ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: Deploy Backend ‡πÑ‡∏õ‡∏ö‡∏ô Cloud

### **‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 1: Railway (‡∏ü‡∏£‡∏µ, ‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)**

1. ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Railway: https://railway.app
2. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° GitHub repository
3. Deploy backend ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
4. ‡πÑ‡∏î‡πâ URL: `https://your-app.railway.app`

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:**
- ‡∏ü‡∏£‡∏µ 500 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- Deploy ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å Git
- ‡∏°‡∏µ PostgreSQL ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ü‡∏£‡∏µ
- Setup ‡∏á‡πà‡∏≤‡∏¢

### **‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2: Render (‡∏ü‡∏£‡∏µ)**

1. ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Render: https://render.com
2. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° GitHub
3. Deploy backend
4. ‡πÑ‡∏î‡πâ URL: `https://your-app.onrender.com`

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:**
- ‡∏ü‡∏£‡∏µ‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ
- PostgreSQL ‡∏ü‡∏£‡∏µ
- Auto-deploy

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢:**
- Sleep ‡∏´‡∏•‡∏±‡∏á 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- ‡∏ï‡∏∑‡πà‡∏ô‡∏ä‡πâ‡∏≤ (30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)

### **‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 3: Heroku (‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô)**

1. ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Heroku: https://heroku.com
2. Deploy ‡∏ú‡πà‡∏≤‡∏ô Git
3. ‡πÑ‡∏î‡πâ URL: `https://your-app.herokuapp.com`

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:**
- ‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£
- ‡πÑ‡∏°‡πà sleep

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢:**
- ‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô $7/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô

### **‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 4: DigitalOcean / AWS / Google Cloud**

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:**
- ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà
- Performance ‡∏î‡∏µ

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢:**
- ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
- ‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô

---

## üîß ‡∏ß‡∏¥‡∏ò‡∏µ Deploy ‡∏ö‡∏ô Railway (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Backend

```bash
# ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ
backend/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ Dockerfile (‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)
‚îú‚îÄ‚îÄ .env (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏ô Railway)
‚îî‚îÄ‚îÄ src/
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: Deploy

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://railway.app
2. Sign in with GitHub
3. New Project ‚Üí Deploy from GitHub repo
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å repository ‡∏ô‡∏µ‡πâ
5. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å `backend` folder
6. Add PostgreSQL database
7. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables:
   ```
   NODE_ENV=production
   PORT=3000
   DB_HOST=<railway-postgres-host>
   DB_PORT=5432
   DB_NAME=railway
   DB_USER=postgres
   DB_PASSWORD=<railway-generated>
   MQTT_BROKER_URL=mqtt://mqtt.uiot.cloud:1883
   MQTT_USERNAME=ethernet
   MQTT_PASSWORD=ei8jZz87wx
   JWT_SECRET=<your-secret>
   ```

8. Deploy!

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Flutter App

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `lib/config/app_config.dart`:

```dart
static String get baseUrl {
  switch (_environment) {
    case Environment.development:
      return 'http://10.134.94.222:3000/api/v1'; // Local
    case Environment.staging:
      return 'https://your-app.railway.app/api/v1'; // Railway
    case Environment.production:
      return 'https://your-app.railway.app/api/v1'; // Railway
  }
}
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: Build APK ‡πÉ‡∏´‡∏°‡πà

```bash
# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô production mode
# ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç lib/main.dart
AppConfig.setEnvironment(Environment.production);

# Build APK
flutter build apk --release
```

---

## üì± ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á Deploy

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Development (WiFi ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
```dart
AppConfig.setEnvironment(Environment.development);
// ‡πÉ‡∏ä‡πâ http://10.134.94.222:3000/api/v1
```

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡πà)
```dart
AppConfig.setEnvironment(Environment.production);
// ‡πÉ‡∏ä‡πâ https://your-app.railway.app/api/v1
```

---

## üîí Security Checklist ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production

- [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô JWT_SECRET ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô DB_PASSWORD
- [ ] ‡πÉ‡∏ä‡πâ HTTPS (Railway ‡πÉ‡∏´‡πâ‡∏ü‡∏£‡∏µ)
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ CORS ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] ‡πÄ‡∏õ‡∏¥‡∏î Firebase Cloud Messaging
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Rate Limiting

---

## üí∞ ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢

| Service | ‡∏ü‡∏£‡∏µ | ‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô |
|---------|-----|----------|
| Railway | 500 ‡∏ä‡∏°./‡πÄ‡∏î‡∏∑‡∏≠‡∏ô | $5/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (unlimited) |
| Render | ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î (‡∏°‡∏µ sleep) | $7/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (no sleep) |
| Heroku | ‡πÑ‡∏°‡πà‡∏°‡∏µ | $7/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô |

---

## üéØ ‡∏™‡∏£‡∏∏‡∏õ

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**
- ‡πÉ‡∏ä‡πâ WiFi ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‚Üí ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á:**
- Deploy ‡∏ö‡∏ô Railway (‡∏ü‡∏£‡∏µ 500 ‡∏ä‡∏°./‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)
- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó URL ‡πÉ‡∏ô app config
- Build APK ‡πÉ‡∏´‡∏°‡πà

---

## üìû ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠?

‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢:
1. Deploy backend ‡πÑ‡∏õ‡∏ö‡∏ô Railway
2. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó config
3. Build APK production

‡∏ö‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö!
