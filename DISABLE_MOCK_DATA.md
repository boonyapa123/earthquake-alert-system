# ‚úÖ ‡∏õ‡∏¥‡∏î Mock Data - ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å MQTT ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

## ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á

### ‚ùå ‡∏•‡∏ö Mock Data ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

‡πÑ‡∏ü‡∏•‡πå: `lib/services/mqtt_manager.dart`

#### 1. ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Mock Data ‡πÉ‡∏ô Constructor
**‡∏Å‡πà‡∏≠‡∏ô:**
```dart
MqttManager({required this.userState}) {
  _initializeMqttClient();
  _startMockDataGenerator(); // ‚ùå ‡∏™‡∏£‡πâ‡∏≤‡∏á mock data
}
```

**‡∏´‡∏•‡∏±‡∏á:**
```dart
MqttManager({required this.userState}) {
  _initializeMqttClient(); // ‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MQTT ‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
}
```

#### 2. ‡∏•‡∏ö Mock Data ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
**‡∏Å‡πà‡∏≠‡∏ô:**
```dart
void _onConnected() {
  _connectionState = MqttConnectionState.connected;
  if (AppConfig.isDevelopment) {
    _startMockDataGenerator(); // ‚ùå ‡∏™‡∏£‡πâ‡∏≤‡∏á mock data
  }
  notifyListeners();
}
```

**‡∏´‡∏•‡∏±‡∏á:**
```dart
void _onConnected() {
  _connectionState = MqttConnectionState.connected;
  // ‚úÖ ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å MQTT ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
  notifyListeners();
}
```

#### 3. ‡∏•‡∏ö Mock Data Fallback ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
**‡∏Å‡πà‡∏≠‡∏ô:**
```dart
catch (e) {
  _connectionState = MqttConnectionState.faulted;
  _startMockDataGenerator(); // ‚ùå ‡πÉ‡∏ä‡πâ mock data ‡πÅ‡∏ó‡∏ô
}
```

**‡∏´‡∏•‡∏±‡∏á:**
```dart
catch (e) {
  _connectionState = MqttConnectionState.faulted;
  // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ mock data
}
```

#### 4. ‡∏•‡∏ö Mock Data ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Disconnect
**‡∏Å‡πà‡∏≠‡∏ô:**
```dart
void _onDisconnected() {
  _connectionState = MqttConnectionState.disconnected;
  if (AppConfig.enableMockData) {
    _startMockDataGenerator(); // ‚ùå ‡∏™‡∏£‡πâ‡∏≤‡∏á mock data
  }
}
```

**‡∏´‡∏•‡∏±‡∏á:**
```dart
void _onDisconnected() {
  _connectionState = MqttConnectionState.disconnected;
  // ‚úÖ ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ disconnected ‡∏à‡∏£‡∏¥‡∏á‡πÜ
}
```

#### 5. ‡∏•‡∏ö Mock Data Generator Function
**‡∏Å‡πà‡∏≠‡∏ô:**
```dart
void _startMockDataGenerator() {
  _mockTimer = Timer.periodic(const Duration(seconds: 4), (timer) {
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á...
  });
}

MqttLog _generateMockLog(...) {
  // ‡∏™‡∏£‡πâ‡∏≤‡∏á log ‡∏à‡∏≥‡∏•‡∏≠‡∏á...
}
```

**‡∏´‡∏•‡∏±‡∏á:**
```dart
// ‚úÖ ‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î - ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å MQTT ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
```

#### 6. ‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ
**‡∏Å‡πà‡∏≠‡∏ô:**
```dart
MqttClient? client;
Timer? _mockTimer;        // ‚ùå ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß
final Random _random = Random(); // ‚ùå ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß
```

**‡∏´‡∏•‡∏±‡∏á:**
```dart
MqttClient? client; // ‚úÖ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà MQTT client ‡∏à‡∏£‡∏¥‡∏á
```

#### 7. ‡∏•‡∏ö Import ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ
**‡∏Å‡πà‡∏≠‡∏ô:**
```dart
import 'dart:math'; // ‚ùå ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Random
```

**‡∏´‡∏•‡∏±‡∏á:**
```dart
// ‚úÖ ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß
```

---

## ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

### ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ
1. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô** - ‡πÅ‡∏≠‡∏û‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏à‡∏≤‡∏Å MQTT broker ‡∏à‡∏£‡∏¥‡∏á‡πÜ
2. **‡πÑ‡∏°‡πà‡∏™‡∏±‡∏ö‡∏™‡∏ô** - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏•‡∏≠‡∏°‡∏õ‡∏ô‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á
3. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á** - ‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á‡πÜ
4. **‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏∞‡∏≠‡∏≤‡∏î** - ‡∏•‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≠‡∏Å

### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á
1. **‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ MQTT broker ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô** - ‡∏ñ‡πâ‡∏≤ broker ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÅ‡∏≠‡∏û‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
2. **‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á** - ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏´‡∏£‡∏∑‡∏≠ simulator ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
3. **‡πÄ‡∏´‡πá‡∏ô Disconnected ‡∏à‡∏£‡∏¥‡∏á‡πÜ** - ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ disconnected

---

## ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### 1. Rebuild ‡πÅ‡∏≠‡∏û
```bash
flutter clean
flutter pub get
flutter run
```

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏û ‚Üí ‡πÅ‡∏ó‡πá‡∏ö "MQTT Real-time"

**‡∏ñ‡πâ‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:**
```
‚úÖ MQTT Status: CONNECTED
   Total messages: 0
   
‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MQTT
‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å MQTT Broker...
```

### 3. ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö
```bash
cd backend
node simulate-earthquake.js
```

**‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô:**
```
‚úÖ MQTT Status: CONNECTED
   Total messages: 10
   
Real-time MQTT Data
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üåç EQC-SIM-001
   Magnitude: 5.9 Richter
   Location: Pattaya
   Time: 16:53:02
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°...]
```

### 4. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Disconnect
‡∏õ‡∏¥‡∏î MQTT broker ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏¥‡∏î‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï

**‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô:**
```
‚ùå MQTT Status: DISCONNECTED
   Total messages: 0
   
‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• MQTT
‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å MQTT Broker...
```

---

## ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Development
```bash
# Terminal 1: ‡∏£‡∏±‡∏ô simulator ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö
cd backend
node simulate-earthquake.js

# Terminal 2: ‡∏£‡∏±‡∏ô‡πÅ‡∏≠‡∏û
flutter run
```

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production
- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏¥‡∏ô‡πÑ‡∏´‡∏ß‡∏à‡∏£‡∏¥‡∏á
- ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏ó‡∏µ‡πà: `eqnode.tarita/hub/eqdata`
- ‡πÅ‡∏≠‡∏û‡∏à‡∏∞‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## ‡∏™‡∏£‡∏∏‡∏õ

### ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
- ‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MQTT
- ‚ùå ‡πÅ‡∏™‡∏î‡∏á mock data ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
- ‚ùå ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏´‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡πÑ‡∏´‡∏ô‡∏õ‡∏•‡∏≠‡∏°

### ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
- ‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MQTT
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å MQTT
- ‚úÖ ‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á‡πÜ
- ‚úÖ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á

---

## ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

- ‚úÖ `lib/services/mqtt_manager.dart` - ‡∏•‡∏ö mock data ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

## ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πâ

- `lib/config/app_config.dart` - ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏°‡∏µ `enableMockData` flag (‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß)
- `backend/simulate-earthquake.js` - ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö

---

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: ‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå - ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å MQTT ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

**‡∏ï‡πâ‡∏≠‡∏á Rebuild**: ‡πÉ‡∏ä‡πà - ‡∏£‡∏±‡∏ô `flutter clean && flutter pub get && flutter run`
