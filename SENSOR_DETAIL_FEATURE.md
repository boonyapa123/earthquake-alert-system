# 📱 ฟีเจอร์หน้ารายละเอียดเซ็นเซอร์

## ✨ ฟีเจอร์ใหม่

เพิ่มความสามารถในการ**กดที่ header แต่ละประเภทเซ็นเซอร์**เพื่อเปิดหน้ารายละเอียดแยกตามประเภท

---

## 🎯 การทำงาน

### ก่อนเพิ่มฟีเจอร์:
- แสดงข้อมูลทั้งหมดในหน้าเดียว
- ไม่สามารถดูรายละเอียดแยกตามประเภทได้

### หลังเพิ่มฟีเจอร์:
- ✅ กดที่ header "🌍 เซ็นเซอร์แผ่นดินไหว" → เปิดหน้ารายละเอียดแผ่นดินไหว
- ✅ กดที่ header "🌊 เซ็นเซอร์คลื่นซึนามิ" → เปิดหน้ารายละเอียดซึนามิ
- ✅ กดที่ header "📐 เซ็นเซอร์วัดความเอียง" → เปิดหน้ารายละเอียดความเอียง

---

## 📱 หน้ารายละเอียดเซ็นเซอร์

### ส่วนประกอบ:

#### 1. App Bar
```
┌─────────────────────────────────────┐
│ ← 🌍 เซ็นเซอร์แผ่นดินไหว          │
└─────────────────────────────────────┘
```
- แสดง icon และชื่อเซ็นเซอร์
- สีตามประเภทเซ็นเซอร์
- ปุ่ม back

#### 2. สถิติ
```
┌─────────────────────────────────────┐
│ สถิติ                               │
│                                     │
│  ทั้งหมด    สูงสุด      เฉลี่ย     │
│    44       10.00      7.50        │
│  รายการ    Richter    Richter      │
└─────────────────────────────────────┘
```
- จำนวนทั้งหมด
- ค่าสูงสุด
- ค่าเฉลี่ย

#### 3. รายการแยกตามความรุนแรง
```
🚨 รุนแรงมาก [5]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Card 1: 10.0 Richter]
[Card 2: 9.5 Richter]
...

⚠️ รุนแรง [10]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Card 1: 6.5 Richter]
...

🟡 ปานกลาง [15]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Card 1: 5.2 Richter]
...

🟢 ต่ำ [14]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Card 1: 4.1 Richter]
...
```

---

## 🎨 UI Design

### Header (Clickable)
```
┌─────────────────────────────────────┐
│ [🌍] 🌍 เซ็นเซอร์แผ่นดินไหว  [44 รายการ] ➤ │
└─────────────────────────────────────┘
```
- เพิ่ม icon ลูกศร (➤) ด้านขวา
- เปลี่ยนเป็น InkWell (กดได้)
- มี ripple effect เมื่อกด

### Card ในหน้ารายละเอียด
```
┌─────────────────────────────────────┐
│ ⚠️  EQC-28562faa0b60                │
│     Magnitude: 6.50 Richter         │
│     Bangkok                          │
│     14:30:25                         │
└─────────────────────────────────────┘
```
- แสดงข้อมูลครบถ้วน
- สีตามความรุนแรง
- Icon ตามระดับ

---

## 🔧 การทำงานภายใน

### 1. Header Component
```dart
Widget _buildSensorTypeHeader(
  String title, 
  int count, 
  Color color, 
  IconData icon,
  String sensorType,  // เพิ่ม
  List<dynamic> logs,  // เพิ่ม
) {
  return InkWell(
    onTap: () {
      Navigator.push(
        context,
        MaterialPageRoute(
          builder: (context) => SensorDetailScreen(
            sensorType: sensorType,
            title: title,
            color: color,
            icon: icon,
            logs: logs,
          ),
        ),
      );
    },
    child: Container(...),
  );
}
```

### 2. Sensor Detail Screen
```dart
class SensorDetailScreen extends StatelessWidget {
  final String sensorType;
  final String title;
  final Color color;
  final IconData icon;
  final List<dynamic> logs;
  
  // แยกข้อมูลตามความรุนแรง
  // แสดงสถิติ
  // แสดงรายการ
}
```

### 3. Severity Calculation
แยกตามประเภทเซ็นเซอร์:

**แผ่นดินไหว:**
- Critical: >= 7.0 Richter
- High: 6.0-6.9 Richter
- Moderate: 5.0-5.9 Richter
- Low: 4.0-4.9 Richter

**คลื่นซึนามิ:**
- Critical: >= 3.0 เมตร
- High: 1.0-2.9 เมตร
- Moderate: 0.5-0.9 เมตร
- Low: < 0.5 เมตร

**ความเอียงตึก:**
- Critical: >= 2.0 องศา
- High: 1.0-1.9 องศา
- Moderate: 0.5-0.9 องศา
- Low: < 0.5 องศา

---

## 📊 ตัวอย่างการใช้งาน

### ขั้นตอน:
1. เปิดแอพ → แท็บ "MQTT Real-time"
2. เห็น header "🌍 เซ็นเซอร์แผ่นดินไหว [44 รายการ]"
3. **กดที่ header**
4. เปิดหน้ารายละเอียด
5. เห็นสถิติและรายการแยกตามความรุนแรง

### ตัวอย่างหน้ารายละเอียด:

```
┌─────────────────────────────────────┐
│ ← 🌍 เซ็นเซอร์แผ่นดินไหว          │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ สถิติ                               │
│                                     │
│  ทั้งหมด    สูงสุด      เฉลี่ย     │
│    44       10.00      6.25        │
│  รายการ    Richter    Richter      │
└─────────────────────────────────────┘

🚨 รุนแรงมาก [5]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
┌─────────────────────────────────────┐
│ ⚠️  EQC-28562faa0b60                │
│     Magnitude: 10.00 Richter        │
│     Lat: 13.9029, Lon: 100.5331     │
│     01:37:29                         │
└─────────────────────────────────────┘
...

⚠️ รุนแรง [10]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[รายการ...]

🟡 ปานกลาง [15]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[รายการ...]

🟢 ต่ำ [14]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[รายการ...]
```

---

## 📋 ไฟล์ที่สร้าง/แก้ไข

### ไฟล์ใหม่:
- ✅ `lib/screens/sensor_detail_screen.dart` - หน้ารายละเอียดเซ็นเซอร์

### ไฟล์ที่แก้ไข:
- ✅ `lib/screens/home_screen.dart`
  - เพิ่ม import `sensor_detail_screen.dart`
  - แก้ไข `_buildSensorTypeHeader()` ให้รับ parameters เพิ่ม
  - เพิ่ม InkWell และ Navigator.push
  - เพิ่ม icon ลูกศร (chevron_right)

---

## 🎯 ข้อดี

### 1. UX ดีขึ้น
- ✅ ดูรายละเอียดแยกตามประเภทได้
- ✅ ไม่รกในหน้าหลัก
- ✅ เห็นสถิติชัดเจน

### 2. ข้อมูลครบถ้วน
- ✅ แสดงสถิติ (ทั้งหมด, สูงสุด, เฉลี่ย)
- ✅ แยกตามความรุนแรง
- ✅ แสดงรายการทั้งหมด

### 3. Navigation ง่าย
- ✅ กดที่ header เพื่อเข้าดู
- ✅ กด back เพื่อกลับ
- ✅ มี ripple effect

---

## 🧪 การทดสอบ

### 1. Rebuild แอพ
```bash
flutter clean
flutter pub get
flutter run
```

### 2. ทดสอบ Navigation
1. เปิดแท็บ "MQTT Real-time"
2. กดที่ header "🌍 เซ็นเซอร์แผ่นดินไหว"
3. ตรวจสอบ:
   - ✅ เปิดหน้ารายละเอียด
   - ✅ แสดงสถิติถูกต้อง
   - ✅ แสดงรายการครบ
   - ✅ แยกตามความรุนแรง
   - ✅ กด back กลับได้

### 3. ทดสอบทุกประเภท
- ✅ แผ่นดินไหว (สีแดง)
- ✅ คลื่นซึนามิ (สีน้ำเงิน)
- ✅ ความเอียงตึก (สีม่วง)

---

## 🎨 สรุป

### ฟีเจอร์ใหม่:
- ✅ กดที่ header เพื่อดูรายละเอียด
- ✅ หน้ารายละเอียดแยกตามประเภท
- ✅ แสดงสถิติ (ทั้งหมด, สูงสุด, เฉลี่ย)
- ✅ แยกตามความรุนแรง (Critical, High, Moderate, Low)
- ✅ Icon ลูกศร (➤) บอกว่ากดได้

### การใช้งาน:
1. กดที่ header ประเภทเซ็นเซอร์
2. เห็นหน้ารายละเอียด
3. ดูสถิติและรายการ
4. กด back เพื่อกลับ

---

**สถานะ**: ✅ เสร็จสมบูรณ์ - Rebuild แอพเพื่อทดสอบ
